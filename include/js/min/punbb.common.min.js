/*! LAB.js (LABjs :: Loading And Blocking JavaScript)
    v2.0.3 (c) Kyle Simpson
    MIT License
*/
(function(n){var q=n.$LAB,i="UseLocalXHR",m="AlwaysPreserveOrder",k="AllowDuplicates",j="CacheBust",d="BasePath",o=/^[^?#]*\//.exec(location.href)[0],y=/^\w+\:\/\/\/?[^\/]+/.exec(o)[0],e=document.head||document.getElementsByTagName("head"),g=(n.opera&&Object.prototype.toString.call(n.opera)=="[object Opera]")||("MozAppearance" in document.documentElement.style),w=document.createElement("script"),a=typeof w.preload=="boolean",t=a||(w.readyState&&w.readyState=="uninitialized"),u=!t&&w.async===true,v=!t&&!u&&!g;function r(z){return Object.prototype.toString.call(z)=="[object Function]";}function x(z){return Object.prototype.toString.call(z)=="[object Array]";}function f(B,A){var z=/^\w+\:\/\//;if(/^\/\/\/?/.test(B)){B=location.protocol+B;}else{if(!z.test(B)&&B.charAt(0)!="/"){B=(A||"")+B;}}return z.test(B)?B:((B.charAt(0)=="/"?y:o)+B);}function h(A,B){for(var z in A){if(A.hasOwnProperty(z)){B[z]=A[z];}}return B;}function b(A){var B=false;for(var z=0;z<A.scripts.length;z++){if(A.scripts[z].ready&&A.scripts[z].exec_trigger){B=true;A.scripts[z].exec_trigger();A.scripts[z].exec_trigger=null;}}return B;}function c(B,A,z,C){B.onload=B.onreadystatechange=function(){if((B.readyState&&B.readyState!="complete"&&B.readyState!="loaded")||A[z]){return;}B.onload=B.onreadystatechange=null;C();};}function s(z){z.ready=z.finished=true;for(var A=0;A<z.finished_listeners.length;A++){z.finished_listeners[A]();}z.ready_listeners=[];z.finished_listeners=[];}function p(B,C,A,D,z){setTimeout(function(){var E,G=C.real_src,F;if("item" in e){if(!e[0]){setTimeout(arguments.callee,25);return;}e=e[0];}E=document.createElement("script");if(C.type){E.type=C.type;}if(C.charset){E.charset=C.charset;}if(z){if(t){A.elem=E;if(a){E.preload=true;E.onpreload=D;}else{E.onreadystatechange=function(){if(E.readyState=="loaded"){D();}};}E.src=G;}else{if(z&&G.indexOf(y)==0&&B[i]){F=new XMLHttpRequest();F.onreadystatechange=function(){if(F.readyState==4){F.onreadystatechange=function(){};A.text=F.responseText+"\n//@ sourceURL="+G;D();}};F.open("GET",G);F.send();}else{E.type="text/cache-script";c(E,A,"ready",function(){e.removeChild(E);D();});E.src=G;e.insertBefore(E,e.firstChild);}}}else{if(u){E.async=false;c(E,A,"finished",D);E.src=G;e.insertBefore(E,e.firstChild);}else{c(E,A,"finished",D);E.src=G;e.insertBefore(E,e.firstChild);}}},0);}function l(){var B={},G=t||v,z=[],A={},D;B[i]=true;B[m]=false;B[k]=false;B[j]=false;B[d]="";function F(J,L,I){var H;function K(){if(H!=null){H=null;s(I);}}if(A[L.src].finished){return;}if(!J[k]){A[L.src].finished=true;}H=I.elem||document.createElement("script");if(L.type){H.type=L.type;}if(L.charset){H.charset=L.charset;}c(H,I,"finished",K);if(I.elem){I.elem=null;}else{if(I.text){H.onload=H.onreadystatechange=null;H.text=I.text;}else{H.src=L.real_src;}}e.insertBefore(H,e.firstChild);if(I.text){K();}}function C(J,N,M,H){var I,L,K=function(){N.ready_cb(N,function(){F(J,N,I);});},O=function(){N.finished_cb(N,M);};N.src=f(N.src,J[d]);N.real_src=N.src+(J[j]?((/\?.*$/.test(N.src)?"&_":"?_")+~~(Math.random()*1000000000)+"="):"");if(!A[N.src]){A[N.src]={items:[],finished:false};}L=A[N.src].items;if(J[k]||L.length==0){I=L[L.length]={ready:false,finished:false,ready_listeners:[K],finished_listeners:[O]};p(J,N,I,((H)?function(){I.ready=true;for(var P=0;P<I.ready_listeners.length;P++){I.ready_listeners[P]();}I.ready_listeners=[];}:function(){s(I);}),H);}else{I=L[0];if(I.finished){O();}else{I.finished_listeners.push(O);}}}function E(){var K,O=h(B,{}),H=[],J=0,L=false,N;function Q(S,R){S.ready=true;S.exec_trigger=R;I();}function P(T,S){T.ready=T.finished=true;T.exec_trigger=null;for(var R=0;R<S.scripts.length;R++){if(!S.scripts[R].finished){return;}}S.finished=true;I();}function I(){while(J<H.length){if(r(H[J])){try{H[J++]();}catch(R){}continue;}else{if(!H[J].finished){if(b(H[J])){continue;}break;}}J++;}if(J==H.length){L=false;N=false;}}function M(){if(!N||!N.scripts){H.push(N={scripts:[],finished:true});}}K={script:function(){for(var R=0;R<arguments.length;R++){(function(V,T){var U;if(!x(V)){T=[V];}for(var S=0;S<T.length;S++){M();V=T[S];if(r(V)){V=V();}if(!V){continue;}if(x(V)){U=[].slice.call(V);U.unshift(S,1);[].splice.apply(T,U);S--;continue;}if(typeof V=="string"){V={src:V};}V=h(V,{ready:false,ready_cb:Q,finished:false,finished_cb:P});N.finished=false;N.scripts.push(V);C(O,V,N,(G&&L));L=true;if(O[m]){K.wait();}}})(arguments[R],arguments[R]);}return K;},wait:function(){if(arguments.length>0){for(var R=0;R<arguments.length;R++){H.push(arguments[R]);}N=H[H.length-1];}else{N=false;}I();return K;}};return{script:K.script,wait:K.wait,setOptions:function(R){h(R,O);return K;}};}D={setGlobalDefaults:function(H){h(H,B);return D;},setOptions:function(){return E().setOptions.apply(null,arguments);},script:function(){return E().script.apply(null,arguments);},wait:function(){return E().wait.apply(null,arguments);},queueScript:function(){z[z.length]={type:"script",args:[].slice.call(arguments)};
return D;},queueWait:function(){z[z.length]={type:"wait",args:[].slice.call(arguments)};return D;},runQueue:function(){var J=D,H=z.length,I=H,K;for(;--I>=0;){K=z.shift();J=J[K.type].apply(null,K.args);}return J;},noConflict:function(){n.$LAB=q;return D;},sandbox:function(){return l();}};return D;}n.$LAB=l();(function(B,z,A){if(document.readyState==null&&document[B]){document.readyState="loading";document[B](z,A=function(){document.removeEventListener(z,A,false);document.readyState="complete";},false);}})("addEventListener","DOMContentLoaded");})(this);if(typeof PUNBB==="undefined"||!PUNBB){var PUNBB={};}PUNBB.common=(function(){var e=document.documentElement,d=false,a=false;function b(f){return document.getElementById(f);}function c(f,h){if(f&&h){if(f.value.length===0&&h.value.length===0){return;}if(f.value===h.value){return;}var g=parseInt(h.getAttribute("maxlength"),10)||0;if(g>0){h.value=f.value.replace(/@.*/,"").replace(/\s/g,"").substr(0,g);}else{h.value=f.value.replace(/@.*/,"").replace(/\s/g,"");}}}return{on_domready_init:function(){d=true;PUNBB.common.addClass(e,"js");PUNBB.common.attachWindowOpen();PUNBB.common.autoFocus();PUNBB.common.attachCtrlEnterForm();PUNBB.common.attachUsernameFromEmail();PUNBB.common.attachEmailFieldFixer();if(!PUNBB.common.input_support_attr("required")){PUNBB.common.attachValidateForm();}var f=b("brd-messages");if(f){setTimeout(function(){f.style.visibility="hidden";},3500);}},on_load_init:function(){a=true;},addLoadEvent:function(g){if(a===true){g();}else{var f=window.onload;window.onload=(f&&typeof f==="function")?function(){f();g();}:g;}},addDOMReadyEvent:function(h){var f=false;if(d===true){h();return;}if(document.addEventListener){document.addEventListener("DOMContentLoaded",function(){h();f=true;},false);window.addEventListener("load",function(){if(!f){h();}},false);}else{if(window.attachEvent){if(window.ActiveXObject&&window===window.top){g();}else{window.attachEvent("onload",h);}}else{PUNBB.common.addLoadEvent(h);}}function g(){try{e.doScroll("left");}catch(i){setTimeout(g,0);return;}h();}},hasClass:function(g,f){return(new RegExp("\\b"+f+"\\b")).test(g.className);},addClass:function(g,f){if(PUNBB.common.hasClass(g,f)){return false;}else{g.className+=" "+f;}return true;},removeClass:function(g,f){if(!PUNBB.common.hasClass(g,f)){return false;}f=new RegExp("\\s*\\b"+f+"\\b","g");g.className=g.className.replace(f,"");return true;},blink:function(h,g){if(typeof g===undefined){g=2;}var f=h.style.visibility;if(g&&f!=="hidden"){h.style.visibility="hidden";setTimeout(function(){h.style.visibility=f;},200);setTimeout(function(){PUNBB.common.blink(h,g-1);},400);}},onScreen:function(m){function j(){var n=-1;if(window.pageYOffset){n=window.pageYOffset;}else{if(e&&e.scrollTop){n=e.scrollTop;}else{if(document.body){n=document.body.scrollTop;}}}return n;}function i(){var n=-1;if(window.innerHeight){n=window.innerHeight;}else{if(e&&e.clientHeight){n=e.clientHeight;}else{if(document.body){n=document.body.clientHeight;}}}return n;}function g(p){var o=p.offsetTop;p=p.offsetParent;return p?o+=g(p):o;}var f=j(),l=f+i(),h=g(m),k=h+m.clientHeight;return h>=f&&k<l;},map:function(j,g){var h,f;for(h=0,f=g.length;h<f;h+=1){g[h]=j(g[h]);}return g;},find:function(j,g){var h,f;for(h=0,f=g.length;h<f;h+=1){if(j(g[h])){return h;}}return -1;},arrayOfMatched:function(k,h){var j,g,f=[];for(j=0,g=h.length;j<g;j+=1){if(k(h[j])){f.push(h[j]);}}return f;},flatten:function(g){var h,f,j=[];for(h=0,f=g.length;h<f;h+=1){if(typeof g[h]==="object"&&g.length){j.concat(PUNBB.common.flatten(g[h]));}else{j.push(g[h]);}}return j;},validateForm:function(h){var g=function(m){return m.name&&m.name.indexOf("req_")===0;};var j=h.elements,f=PUNBB.common.arrayOfMatched(g,j);g=function(m){return(/^\s*$/).test(m.value);};var i=PUNBB.common.find(g,f);if(i>-1){if(PUNBB.common.find(g,f)>-1){var l=b("req-msg");PUNBB.common.removeClass(l,"req-warn");var k=PUNBB.common.addClass(l,"req-error");if(!PUNBB.common.onScreen(l)){l.scrollIntoView();setTimeout(function(){PUNBB.common.blink(l);},500);}else{if(!k){PUNBB.common.blink(l);}}if(PUNBB.common.onScreen(f[i])){f[i].focus();}return false;}}return true;},doQuickjumpRedirect:function(h,g){var f=b("qjump-select")[b("qjump-select").selectedIndex].value;h=h.replace("$1",f);h=h.replace("$2",g[f]);document.location=h;return false;},attachQuickjumpRedirect:function(f,i){var h=b("qjump-select"),g=b("qjump-submit");if(h){h.onchange=function(){return PUNBB.common.doQuickjumpRedirect(f,i);};}if(g){g.onclick=function(){return PUNBB.common.doQuickjumpRedirect(f,i);};PUNBB.common.addClass(g,"visual-hidden");}},initToggleCheckboxes:function(){var k=function(i){return function(){return PUNBB.common.toggleCheckboxes(i);};};var g,f,l=document.getElementsByTagName("span");for(g=0,f=l.length;g<f;g+=1){var h=l[g];if(PUNBB.common.hasClass(h,"select-all")&&h.getAttribute("data-check-form")){var j=b(h.getAttribute("data-check-form"));if(j){h.onclick=k(j);}}}},toggleCheckboxes:function(j){if(!j){return false;
}var g,f,k=j.getElementsByTagName("input");for(g=0,f=k.length;g<f;g+=1){var h=k[g];if(h.getAttribute("data-no-select-all")){continue;}if(h.getAttribute("type")=="checkbox"&&h.disabled===false){h.checked=!h.checked;}}return false;},attachCtrlEnterForm:function(){var r=function(f){return function(j){j=j||window.event;var i=j.keyCode||j.which;if(((i==13)||(i==10))&&(j.ctrlKey===true)){return f.submit();}};};var n=function(f){return f.tagName.toUpperCase()=="TEXTAREA";};var m,q,h=document.forms;for(m=0,q=h.length;m<q;m+=1){var p=h[m];if(!PUNBB.common.hasClass(p,"frm-ctrl-submit")){continue;}var l,o,g=p.elements,k=PUNBB.common.arrayOfMatched(n,g);for(l=0,o=k.length;l<o;l+=1){k[l].onkeypress=r(p);}}},attachValidateForm:function(){var o=function(i){return i.name&&i.name.indexOf("req_")===0;};var l=function(i){return i.type&&(i.type=="submit"&&i.name!="cancel");};var m=function(i){return function(){return PUNBB.common.validateForm(i);};};var k,n,g=document.forms;for(k=0,n=g.length;k<n;k+=1){var f=g[k].elements;if(PUNBB.common.find(o,f)>-1){var h=PUNBB.common.arrayOfMatched(l,f),j=g[k];h=PUNBB.common.map(function(i){i.onclick=m(j);},h);}}},attachWindowOpen:function(){if(!document.getElementsByTagName){return;}var h=function(){return function(){window.open(this.href);return false;};};var g,f=document.getElementsByTagName("a");for(g=0;g<f.length;g+=1){if(PUNBB.common.hasClass(f[g],"exthelp")){f[g].onclick=h();}}},autoFocus:function(){var g=function(i){return i.offsetWidth>0&&(i.tagName.toUpperCase()=="TEXTAREA"||(i.tagName.toUpperCase()=="INPUT"&&(i.type=="text")||(i.type=="password")||(i.type=="email")||(i.type=="url")||(i.type=="number")));};var f=b("afocus");if(!f||window.location.hash.replace(/#/g,"")){return;}f=f.all||f.getElementsByTagName("*");var h=PUNBB.common.find(g,f);if(h>-1){f[h].focus();}},input_support_attr:function(f){var g=document.createElement("input");if(!f){return false;}return !!(f in g);},attachUsernameFromEmail:function(){var m=function(f){return(f.tagName.toUpperCase()=="INPUT"&&f.type=="email"&&f.getAttribute("data-suggest-role")==="email");};var p=function(f){return(f.tagName.toUpperCase()=="INPUT"&&f.type=="text"&&f.getAttribute("data-suggest-role")==="username");};var j,n,g=document.forms;for(j=0,n=g.length;j<n;j+=1){var l=g[j],k=-1,h=-1;if(!PUNBB.common.hasClass(l,"frm-suggest-username")){continue;}k=PUNBB.common.find(m,l.elements);h=PUNBB.common.find(p,l.elements);if(k>0&&h>0){var o=function(f){return function(i){c(this,f);};};l.elements[k].onkeyup=o(l.elements[h]);}}},attachEmailFieldFixer:function(){var n=function(i){return(i.tagName.toUpperCase()=="INPUT"&&i.type=="email");};var p=function(){var i=this;if(i&&i.value.length>0){i.value=i.value.replace(/\s/g,"");}};var l,o,g=document.forms;for(l=0,o=g.length;l<o;l+=1){var k,m,f=g[l].elements,h=PUNBB.common.arrayOfMatched(n,f);for(k=0,m=h.length;k<m;k+=1){h[k].onblur=p;}}}};}());PUNBB.common.addDOMReadyEvent(PUNBB.common.on_domready_init);PUNBB.common.addLoadEvent(PUNBB.common.on_load_init);